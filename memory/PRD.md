# Transfers Admin - PRD

## المشكلة الأصلية
إضافة قاعدة بيانات لحفظ المعلومات الجديدة من صفحة التسجيل وربطها بلوحة التحكم

## ما تم تنفيذه

### تاريخ التحديث: 2026-01-31

#### 1. نظام التسجيل وقاعدة البيانات
- ✅ إضافة API `/api/auth/register` لتسجيل المستخدمين
- ✅ إضافة API `/api/auth/user-login` لتسجيل الدخول
- ✅ حفظ البيانات في MongoDB (collection: registered_users)
- ✅ تشفير كلمات المرور باستخدام SHA256
- ✅ التحقق من عدم تكرار اسم المستخدم والبريد الإلكتروني

#### 2. تحسينات الواجهة
- ✅ تغيير "الآيدي (ID)" إلى "اسم المستخدم" في صفحة التسجيل
- ✅ إضافة خانة كلمة المرور إجبارية في صفحة إضافة عضو بلوحة التحكم

#### 3. الحقول المحفوظة
- userId (اسم المستخدم الفريد)
- name (الاسم الكامل)
- email (البريد الإلكتروني)
- phone (رقم الجوال)
- password (مشفرة)
- userType (نوع المستخدم: rider/driver)
- createdAt (تاريخ الإنشاء)

## البنية التقنية
- **Backend**: FastAPI + MongoDB
- **Frontend**: React.js
- **Authentication**: JWT

## المهام المتبقية (Backlog)
- P1: إضافة التحقق من البريد الإلكتروني
- P2: إضافة استعادة كلمة المرور
- P2: تحسين أمان كلمات المرور

### تاريخ التحديث: 2026-01-31 (تحديث 2)

#### 4. ربط الدردشة بقاعدة البيانات
- ✅ إضافة API `/api/auth/search-users` للبحث عن المستخدمين
- ✅ إضافة API `/api/auth/user/{userId}` لجلب بيانات مستخدم
- ✅ تحديث صفحة الدردشة للبحث من قاعدة البيانات
- ✅ عرض نتائج البحث في Dialog مع إمكانية اختيار المستخدم
- ✅ بدء محادثة جديدة مع المستخدم المختار
